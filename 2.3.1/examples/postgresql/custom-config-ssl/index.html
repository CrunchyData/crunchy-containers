<!DOCTYPE html>
<html>
  <head>
    
    <title>Crunchy Data Container Suite Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.53" />
<title>Custom Configuration of PostgreSQL Container with SSL :: Crunchy Data Container Suite Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/crunchy-containers/2.3.1/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/crunchy-containers/2.3.1/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/2.3.1/theme-flex/style.css" rel="stylesheet">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://crunchydata.github.io/crunchy-containers/2.3.1/css/Fort-Fonts.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/2.3.1/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<script src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/jquery-2.x.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.bundle.min.js" integrity="sha384-zDnhMsjVZfS3hiP7oCBRmfjkQC4fzxVxFhBx8Hkz2aZX8gEvA/jsP3eXRCvzTofP" crossorigin="anonymous"></script>
<script src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/main.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/2.3.1\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/examples/postgresql/custom-config-ssl/">
    
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  
	
  
    <a class="navbar-brand" href="https://www.crunchydata.com/"><img alt="Crunchy Data" src="https://crunchydata.github.io/crunchy-containers/2.3.1/images/logo.svg"></a>
  


  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <ul class="navbar-nav mr-auto"></ul>
  <span class="navbar-text">
      <nav class="shortcuts">
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers"  rel="noopener">
                    <i class='fab fa-github'></i> <label>Source</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://kubernetes.io/docs/"  rel="noopener">
                    <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/LICENSE.md"  rel="noopener">
                    <i class='fas fa-file-contract'></i> <label>License</label>
                  </a>
              </li>
      </nav>
  </span>
</nav>

<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/crunchy-containers/2.3.1/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/2.3.1\/";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/crunchy-containers/2.3.1/">Crunchy Data Container Suite Documentation</a>
      <hr>

      <b>Navigation</b>
    <li data-nav-id="/overview/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/overview/">Overview</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/overview/overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/overview/overview/">
            Container Images
          </a>
        </div>
    </li>
      <li data-nav-id="/overview/supported/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/overview/supported/">
            Supported Platforms
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/client-user-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/client-user-guide/">Client User Guide</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/client-user-guide/user-guide/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/client-user-guide/user-guide/">
            User Guide
          </a>
        </div>
    </li>
      <li data-nav-id="/client-user-guide/usage/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/client-user-guide/usage/">
            Using the Images
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/examples/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/">Examples</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/examples/postgresql/primary/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/primary/">
            PostgreSQL Primary
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/custom-config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/custom-config/">
            Custom Configuration of PostgreSQL Container
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/custom-config-ssl/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/custom-config-ssl/">
            Custom Configuration of PostgreSQL Container with SSL
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/primary-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/primary-replica/">
            Primary and Streaming Replica Containers
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/sync-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/sync-replica/">
            Synchronous Replication
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/statefulset-cluster/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/statefulset-cluster/">
            Statefulset PostgreSQL Cluster
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/postgresql/postgis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/postgis/">
            PostGIS Container
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/poolers/pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/poolers/pgpool/">
            pgPool II
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/backup-restoration/pgbackrest/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/backup-restoration/pgbackrest/">
            pgBackRest
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/backup-restoration/pgbasebackup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/backup-restoration/pgbasebackup/">
            pgBaseBackup
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/backup-restoration/pgdump-pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/backup-restoration/pgdump-pgrestore/">
            pgDump &amp; pgRestore
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/backup-restoration/scheduler/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/backup-restoration/scheduler/">
            Scheduler
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/poolers/pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/poolers/pgbouncer/">
            pgBouncer
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/metrics/metrics/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/metrics/metrics/">
            Metrics and Performance
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/metrics/pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/metrics/pgbadger/">
            pgBadger
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/logging/centralized-logging/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/logging/centralized-logging/">
            Centralized Logging
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/logging/pgaudit/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/logging/pgaudit/">
            pgAudit
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/administration/upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/administration/upgrade/">
            Upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="/examples/administration/pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/administration/pgadmin4/">
            pgAdmin 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/installation-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/installation-guide/">Installation Guide</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/installation-guide/installation-guide/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/installation-guide/installation-guide/">
            Installation Guide
          </a>
        </div>
    </li>
      <li data-nav-id="/installation-guide/storage-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/installation-guide/storage-configuration/">
            Storage Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/container-specifications/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/">Container Specifications</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/container-specifications/crunchy-backrest-restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-backrest-restore/">
            crunchy-backrest-restore
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-backup/">
            crunchy-backup
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-collect/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-collect/">
            crunchy-collect
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-grafana/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-grafana/">
            crunchy-grafana
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgadmin4/">
            crunchy-pgadmin4
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgbadger/">
            crunchy-pgbadger
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgbouncer/">
            crunchy-pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgdump/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgdump/">
            crunchy-pgdump
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgpool/">
            crunchy-pgpool
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-pgrestore/">
            crunchy-pgrestore
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-postgres-gis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-postgres-gis/">
            crunchy-postgres-gis
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-postgres/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-postgres/">
            crunchy-postgres
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-prometheus/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-prometheus/">
            crunchy-prometheus
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-scheduler/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-scheduler/">
            crunchy-scheduler
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/container-specifications/crunchy-upgrade/">
            crunchy-upgrade
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/contributing/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/">Contributing</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/contributing/building/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/building/">
            Building the Containers
          </a>
        </div>
    </li>
      <li data-nav-id="/contributing/documentation-updates/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/documentation-updates/">
            Updating Documentation
          </a>
        </div>
    </li>
      <li data-nav-id="/contributing/issues/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/issues/">
            Submitting Issues
          </a>
        </div>
    </li>
      <li data-nav-id="/contributing/pull-requests/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/pull-requests/">
            Submitting Pull Requests
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/troubleshooting/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/2.3.1/troubleshooting/">Troubleshooting</a>

      </div>
    </li>




      <hr><nav id="TableOfContents"></nav>



      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/overview/" >
   Overview</option>
    <option value="/client-user-guide/" >
   Client User Guide</option>
    <option value="/examples/" >
   Examples</option> 
      <option value="/examples/postgresql/primary/" >- PostgreSQL Primary</option>
      <option value="/examples/postgresql/custom-config/" >- Custom Configuration of PostgreSQL Container</option>
      <option value="/examples/postgresql/custom-config-ssl/"  selected>- Custom Configuration of PostgreSQL Container with SSL</option>
      <option value="/examples/postgresql/primary-replica/" >- Primary and Streaming Replica Containers</option>
      <option value="/examples/postgresql/sync-replica/" >- Synchronous Replication</option>
      <option value="/examples/postgresql/statefulset-cluster/" >- Statefulset PostgreSQL Cluster</option>
      <option value="/examples/postgresql/postgis/" >- PostGIS Container</option>
      <option value="/examples/poolers/pgpool/" >- pgPool II</option>
      <option value="/examples/backup-restoration/pgbackrest/" >- pgBackRest</option>
      <option value="/examples/backup-restoration/pgbasebackup/" >- pgBaseBackup</option>
      <option value="/examples/backup-restoration/pgdump-pgrestore/" >- pgDump &amp; pgRestore</option>
      <option value="/examples/backup-restoration/scheduler/" >- Scheduler</option>
      <option value="/examples/poolers/pgbouncer/" >- pgBouncer</option>
      <option value="/examples/metrics/metrics/" >- Metrics and Performance</option>
      <option value="/examples/metrics/pgbadger/" >- pgBadger</option>
      <option value="/examples/logging/centralized-logging/" >- Centralized Logging</option>
      <option value="/examples/logging/pgaudit/" >- pgAudit</option>
      <option value="/examples/administration/upgrade/" >- Upgrade</option>
      <option value="/examples/administration/pgadmin4/" >- pgAdmin 4</option>
  
    <option value="/installation-guide/" >
   Installation Guide</option>
    <option value="/container-specifications/" >
   Container Specifications</option>
    <option value="/contributing/" >
   Contributing</option>
    <option value="/troubleshooting/" >
   Troubleshooting</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/crunchy-containers/2.3.1/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/crunchy-containers/edit/master/hugo/content/examples/postgresql/custom-config-ssl.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/crunchy-containers/2.3.1/'>Introduction</a> > <a href='https://crunchydata.github.io/crunchy-containers/2.3.1/examples/'>Examples</a> > Custom Configuration of PostgreSQL Container with SSL

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>Custom Configuration of PostgreSQL Container with SSL</h1>

    

    
    

<h2 id="ssl-authentication">SSL Authentication</h2>

<p>This example shows how you can configure PostgreSQL to use SSL for
client authentication.</p>

<p>The example requires SSL certificates and keys to be created.  Included in
the examples directory is a script to create self-signed certificates (server
and client) for the example: <code>$CCPROOT/examples/ssl-creator.sh</code>.</p>

<p>The example creates a client certificate for the user <code>testuser</code>.  Furthermore,
the server certificate is created for the server name <code>custom-config-ssl</code>.</p>

<p>This example can be run as follows for the Docker environment:</p>

<pre><code>cd $CCPROOT/examples/docker/custom-config-ssl
./run.sh
</code></pre>

<p>And the example can be run in the following directory for the Kubernetes and OpenShift environments:</p>

<pre><code>cd $CCPROOT/examples/kube/custom-config-ssl
./run.sh
</code></pre>

<p>A required step to make this example work is to define
in your <code>/etc/hosts</code> file an entry that maps <code>custom-config-ssl</code>
to the service IP address for the container.</p>

<p>For instance, if your service has an address as follows:</p>

<pre><code>${CCP_CLI} get service
NAME                CLUSTER-IP       EXTERNAL-IP   PORT(S)                   AGE
custom-config-ssl   172.30.211.108   &lt;none&gt;        5432/TCP
</code></pre>

<p>Then your <code>/etc/hosts</code> file needs an entry like this:</p>

<pre><code>172.30.211.108 custom-config-ssl
</code></pre>

<p>For production Kubernetes and OpenShift installations, it will likely be preferred for DNS
names to resolve to the PostgreSQL service name and generate
server certificates using the DNS names instead of the example
name <code>custom-config-ssl</code>.</p>

<p>If as a client it&rsquo;s required to confirm the identity of the server, <code>verify-full</code> can be
specified for <code>ssl-mode</code> in the connection string.  This will check if the server and the
server certificate have the same name.  Additionally, the proper connection parameters
must be specified in the connection string for the certificate information required to
trust and verify the identity of the server (<code>sslrootcert</code> and <code>sslcrl</code>), and to
authenticate the client using a certificate (<code>sslcert</code> and <code>sslkey</code>):</p>

<pre><code>psql &quot;postgresql://testuser@custom-config-ssl:5432/userdb?\
sslmode=verify-full&amp;\
sslrootcert=$CCPROOT/examples/kube/custom-config-ssl/certs/ca.crt&amp;\
sslcrl=$CCPROOT/examples/kube/custom-config-ssl/certs/ca.crl&amp;\
sslcert=$CCPROOT/examples/kube/custom-config-ssl/certs/client.crt&amp;\
sslkey=$CCPROOT/examples/kube/custom-config-ssl/certs/client.key&quot;
</code></pre>

<p>To connect via IP, <code>sslmode</code> can be changed to <code>require</code>.  This will verify the server
by checking the certificate chain up to the trusted certificate authority, but will not
verify that the hostname matches the certificate, as occurs with <code>verify-full</code>.  The same
connection parameters as above can be then provided for the client and server certificate
information.</p>

<pre><code>psql &quot;postgresql://testuser@IP_OF_PGSQL:5432/userdb?\
sslmode=require&amp;\
sslrootcert=$CCPROOT/examples/kube/custom-config-ssl/certs/ca.crt&amp;\
sslcrl=$CCPROOT/examples/kube/custom-config-ssl/certs/ca.crl&amp;\
sslcert=$CCPROOT/examples/kube/custom-config-ssl/certs/client.crt&amp;\
sslkey=$CCPROOT/examples/kube/custom-config-ssl/certs/client.key&quot;
</code></pre>

<p>You should see a connection that looks like the following:</p>

<pre><code>psql (10.7)
SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
Type &quot;help&quot; for help.

userdb=&gt;
</code></pre>



    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/custom-config/" title="Custom Configuration of PostgreSQL Container"> <i class="fa fa-chevron-left"></i><label>Custom Configuration of PostgreSQL Container</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/crunchy-containers/2.3.1/examples/postgresql/primary-replica/" title="Primary and Streaming Replica Containers" style="margin-right: 0px;"><label>Primary and Streaming Replica Containers</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

  </div>


	<div>


  



	</div>
</footer>

<link href="https://crunchydata.github.io/crunchy-containers/2.3.1/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/crunchy-containers/2.3.1/js/featherlight.min.js"></script>

<script src="https://crunchydata.github.io/crunchy-containers/2.3.1/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>

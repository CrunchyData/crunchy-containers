<!DOCTYPE html>
<html>
  <head>
    
    <title>Crunchy Data Container Suite Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.55.6" />
<title>crunchy-upgrade :: Crunchy Data Container Suite Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/crunchy-containers/4.7.7/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/crunchy-containers/4.7.7/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/4.7.7/theme-flex/style.css" rel="stylesheet">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://crunchydata.github.io/crunchy-containers/4.7.7/css/Fort-Fonts.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/4.7.7/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<script src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/jquery-2.x.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.bundle.min.js" integrity="sha384-zDnhMsjVZfS3hiP7oCBRmfjkQC4fzxVxFhBx8Hkz2aZX8gEvA/jsP3eXRCvzTofP" crossorigin="anonymous"></script>
<script src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/main.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/4.7.7";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/container-specifications/crunchy-upgrade/">
    
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  
<a class="navbar-brand" href="https://www.crunchydata.com/"><img alt="Crunchy Data" src="https://crunchydata.github.io/crunchy-containers/4.7.7/images/logo.svg"></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <ul class="navbar-nav mr-auto"></ul>
  <span class="navbar-text">
      <nav class="shortcuts">
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers" target="_blank" rel="noopener">
                    <i class='fab fa-github'></i> <label>Source</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://kubernetes.io/docs/" target="_blank" rel="noopener">
                    <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/LICENSE.md" target="_blank" rel="noopener">
                    <i class='fas fa-file-contract'></i> <label>License</label>
                  </a>
              </li>
      </nav>
  </span>
</nav>

<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/crunchy-containers/4.7.7/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/4.7.7";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/crunchy-containers/4.7.7/">Crunchy Data Container Suite Documentation</a>
      <hr>
        <b>Available Formats</b>
        <nav class="downloads">
                <li class="" role="">
                    <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/pdf/crunchy_containers.pdf" target="_blank" rel="noopener">
                      <i class='fas fa-file-pdf'></i> <label>PDF</label>
                    </a>
                </li>
                <li class="" role="">
                    <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/epub/crunchy_containers.epub" target="_blank" rel="noopener">
                      <i class='fas fa-book'></i> <label>EPUB</label>
                    </a>
                </li>
        </nav>
        <hr>

      <b>Navigation</b>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/">Overview</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/overview/">
            Container Images
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/supported/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/overview/supported/">
            Supported Platforms
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/">Client User Guide</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/user-guide/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/user-guide/">
            User Guide
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/usage/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/client-user-guide/usage/">
            Using the Images
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/">Examples</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/primary/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/primary/">
            PostgreSQL Primary
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/custom-config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/custom-config/">
            Custom Configuration of PostgreSQL Container
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/custom-config-ssl/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/custom-config-ssl/">
            Custom Configuration of PostgreSQL Container with SSL
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/primary-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/primary-replica/">
            Primary and Streaming Replica Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/sync-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/sync-replica/">
            Synchronous Replication
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/postgis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/postgresql/postgis/">
            PostGIS Container
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/poolers/pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/poolers/pgpool/">
            pgPool II
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgbackrest/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgbackrest/">
            pgBackRest
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgbasebackup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgbasebackup/">
            pgBaseBackup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgdump-pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/backup-restoration/pgdump-pgrestore/">
            pgDump &amp; pgRestore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/poolers/pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/poolers/pgbouncer/">
            pgBouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/metrics/pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/metrics/pgbadger/">
            pgBadger
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/metrics/pgbench/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/metrics/pgbench/">
            pgBench
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/logging/centralized-logging/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/logging/centralized-logging/">
            Centralized Logging
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/logging/pgaudit/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/logging/pgaudit/">
            pgAudit
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/administration/upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/administration/upgrade/">
            Upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/administration/pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/examples/administration/pgadmin4/">
            pgAdmin 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/">Installation Guide</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/installation-guide/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/installation-guide/">
            Installation Guide
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/storage-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/installation-guide/storage-configuration/">
            Storage Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/">Container Specifications</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgadmin4/">
            crunchy-pgadmin4
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbackrest/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbackrest/">
            crunchy-pgbackrest
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbackrest-repo/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbackrest-repo/">
            crunchy-pgbackrest-repo
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbadger/">
            crunchy-pgbadger
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgbouncer/">
            crunchy-pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-pgpool/">
            crunchy-pgpool
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/">crunchy-postgres</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/postgres/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/postgres/">
            postgres
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/backup/">
            backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgbasebackup-restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgbasebackup-restore/">
            pgbasebackup-restore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgbench/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgbench/">
            pgbench
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgdump/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgdump/">
            pgdump
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/pgrestore/">
            pgrestore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/sqlrunner/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres/sqlrunner/">
            sqlrunner
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres-gis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres-gis/">
            crunchy-postgres-gis
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-upgrade/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-upgrade/">
            crunchy-upgrade
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/">Contributing</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/building/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/building/">
            Building the Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/issues/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/issues/">
            Submitting Issues
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/pull-requests/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/pull-requests/">
            Submitting Pull Requests
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/documentation-updates/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/documentation-updates/">
            
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/4.7.7/troubleshooting/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/4.7.7/troubleshooting/">Troubleshooting</a>

      </div>
    </li>




      <hr><nav id="TableOfContents"></nav>



      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/overview/" >
   Overview</option>
    <option value="/client-user-guide/" >
   Client User Guide</option>
    <option value="/examples/" >
   Examples</option>
    <option value="/installation-guide/" >
   Installation Guide</option>
    <option value="/container-specifications/" >
   Container Specifications</option> 
      <option value="/container-specifications/crunchy-pgadmin4/" >- crunchy-pgadmin4</option>
      <option value="/container-specifications/crunchy-pgbackrest/" >- crunchy-pgbackrest</option>
      <option value="/container-specifications/crunchy-pgbackrest-repo/" >- crunchy-pgbackrest-repo</option>
      <option value="/container-specifications/crunchy-pgbadger/" >- crunchy-pgbadger</option>
      <option value="/container-specifications/crunchy-pgbouncer/" >- crunchy-pgbouncer</option>
      <option value="/container-specifications/crunchy-pgpool/" >- crunchy-pgpool</option>
    <option value="/container-specifications/crunchy-postgres/" >
  - 
   crunchy-postgres</option>
      <option value="/container-specifications/crunchy-postgres-gis/" >- crunchy-postgres-gis</option>
      <option value="/container-specifications/crunchy-upgrade/"  selected>- crunchy-upgrade</option>
  
    <option value="/contributing/" >
   Contributing</option>
    <option value="/troubleshooting/" >
   Troubleshooting</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/crunchy-containers/edit/master/docs/content/container-specifications/crunchy-upgrade.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/crunchy-containers/4.7.7/'>Introduction</a> > <a href='https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/'>Container Specifications</a> > crunchy-upgrade

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>crunchy-upgrade</h1>

    

    
    

<p>The crunchy-upgrade container contains multiple versions of PostgreSQL in order
to perform a <code>pg_upgrade</code> between major versions of PostgreSQL. This includes
the following combinations:</p>

<ul>
<li>PostgreSQL 9.5 / PostgreSQL 9.6</li>
<li>PostgreSQL 9.6 / PostgreSQL 10</li>
<li>PostgreSQL 10 / PostgreSQL 11</li>
<li>PostgreSQL 11 / PostgreSQL 12</li>
<li>PostgreSQL 12 / PostgreSQL 13</li>
</ul>

<h2 id="features">Features</h2>

<p>The following features are supported by the crunchy-upgrade container:</p>

<ul>
<li>Supports a pg_upgrade of the PostgreSQL database.</li>
<li>Doesn&rsquo;t alter the old database files.</li>
<li>Creates the new database directory.</li>
</ul>

<h2 id="restrictions">Restrictions</h2>

<ul>
<li>Does <strong>not</strong> currently support a PostGIS upgrade.</li>
<li>Supports upgrades from:</li>
<li>9.5 to 9.6</li>
<li>9.6 to 10</li>
<li>10 to 11</li>
<li>11 to 12</li>
<li>12 to 13</li>
</ul>

<h2 id="packages">Packages</h2>

<p>The crunchy-upgrade Docker image contains the following packages (versions vary depending on PostgreSQL version):</p>

<ul>
<li>PostgreSQL (13.8, 12.12, 11.17, and 10.22)</li>
<li>CentOS 7, UBI 8 - publicly available</li>
<li>UBI 7, UBI 8 - customers only</li>
</ul>

<h2 id="environment-variables">Environment Variables</h2>

<h3 id="required">Required</h3>

<table>
<thead>
<tr>
<th align="left"><strong>Name</strong></th>
<th align="left"><strong>Default</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>OLD_DATABASE_NAME</strong></td>
<td align="left">None</td>
<td align="left">Refers to the database (pod) name that we want to convert.</td>
</tr>

<tr>
<td align="left"><strong>NEW_DATABASE_NAME</strong></td>
<td align="left">None</td>
<td align="left">Refers to the database (pod) name that is given to the upgraded database.</td>
</tr>

<tr>
<td align="left"><strong>OLD_VERSION</strong></td>
<td align="left">None</td>
<td align="left">The PostgreSQL version of the old database.</td>
</tr>

<tr>
<td align="left"><strong>NEW_VERSION</strong></td>
<td align="left">None</td>
<td align="left">The PostgreSQL version of the new database.</td>
</tr>
</tbody>
</table>

<h3 id="optional">Optional</h3>

<table>
<thead>
<tr>
<th align="left"><strong>Name</strong></th>
<th align="left"><strong>Default</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>PG_LOCALE</strong></td>
<td align="left">Default locale</td>
<td align="left">If set, the locale you want to create the database with.</td>
</tr>

<tr>
<td align="left"><strong>CHECKSUMS</strong></td>
<td align="left">true</td>
<td align="left">Enables <code>data-checksums</code> during initialization of the database.  Can only be set during initial database creation.  Set to <code>false</code> to disable data checksums.</td>
</tr>

<tr>
<td align="left"><strong>XLOGDIR</strong></td>
<td align="left">None</td>
<td align="left">If set, initdb will use the specified directory for WAL.</td>
</tr>

<tr>
<td align="left"><strong>CRUNCHY_DEBUG</strong></td>
<td align="left">FALSE</td>
<td align="left">Set this to true to enable debugging in logs. Note: this mode can reveal secrets in logs.</td>
</tr>
</tbody>
</table>

<div class="notices tip" >
Data checksums on the Crunchy PostgreSQL container were enabled by default in version 2.1.0.
When trying to upgrade, it's required that both the old database and the new database
have the same data checksums setting.  Prior to upgrade, check if `data_checksums`
were enabled on the database by running the following SQL: `SHOW data_checksums`
</div>



    
      <div class="chevrons">
  <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/crunchy-containers/4.7.7/container-specifications/crunchy-postgres-gis/" title="crunchy-postgres-gis"> <i class="fa fa-chevron-left"></i><label>crunchy-postgres-gis</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/crunchy-containers/4.7.7/contributing/" title="Contributing" style="margin-right: 0px;"><label>Contributing</label><i class="fa fa-chevron-right"></i></a></div>
</div>

</section>
</article>

<footer>

<div class="footline">
  

  



</div>


<div>
</div>

<div class="text-center">
  <p><small>&copy; 2017 - 2022 Crunchy Data Solutions, Inc.</small></p>
</div>


</footer>

<link href="https://crunchydata.github.io/crunchy-containers/4.7.7/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/crunchy-containers/4.7.7/js/featherlight.min.js"></script>

<script src="https://crunchydata.github.io/crunchy-containers/4.7.7/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>

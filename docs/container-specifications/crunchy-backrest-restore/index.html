<!DOCTYPE html>
<html>
  <head>
    <title>Crunchy Data Container Suite Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.44" />

<title>crunchy-backrest-restore :: Crunchy Data Container Suite Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/crunchy-containers/favicon.ico" type="image/x-icon" />
<link href="https://crunchydata.github.io/crunchy-containers/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/css/font-awesome.min.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/css/hybrid.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/css/featherlight.min.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/css/auto-complete.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="https://crunchydata.github.io/crunchy-containers/css/bootstrap.min.css">
<script src="https://crunchydata.github.io/crunchy-containers/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/container-specifications/crunchy-backrest-restore/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <a class="baselink" href="https://crunchydata.github.io/crunchy-containers/">Crunchy Data Container Suite Documentation</a>
  

    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/js/lunr.min.js"></script>
		<script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/";
        
		</script>
		<script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="https://crunchydata.github.io/crunchy-containers/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/installation/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/installation/">Installation</a><i class="fa fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/installation/environment-setup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/installation/environment-setup/">
            Environment Setup
          </a>
        </div>
    </li>
      <li data-nav-id="/installation/build-the-containers/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/installation/build-the-containers/">
            Build the Containers
          </a>
        </div>
    </li>
      <li data-nav-id="/installation/storage-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/installation/storage-configuration/">
            Storage Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/getting-started/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/getting-started/">Getting Started</a><i class="fa fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
    <li data-nav-id="/getting-started/openshift-templates/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/">Openshift Templates</a><i class="fa fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/getting-started/openshift-templates/single-primary/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/single-primary/">
            Single Primary
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/primary-restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/primary-restore/">
            Primary Restore
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/primary-restore-secret/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/primary-restore-secret/">
            Primary Restore Secret
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/primary-backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/primary-backup/">
            Primary Backup
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/primary-backup-secret/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/primary-backup-secret/">
            Primary Backup Secret
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/postgres-replicated/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/postgres-replicated/">
            Primary Replica
          </a>
        </div>
    </li>
      <li data-nav-id="/getting-started/openshift-templates/pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/getting-started/openshift-templates/pgadmin4/">
            pgAdmin4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/getting-started/kubernetes-and-openshift/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/getting-started/kubernetes-and-openshift/">Kubernetes and Openshift</a>

      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/container-specifications/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/">Container Specifications</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="/container-specifications/crunchy-postgres/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-postgres/">
            crunchy-postgres
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-postgres-gis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-postgres-gis/">
            crunchy-postgres-gis
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-backup/">
            crunchy-backup
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-backrest-restore/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-backrest-restore/">
            crunchy-backrest-restore
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgdump/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgdump/">
            crunchy-pgdump
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgrestore/">
            crunchy-pgrestore
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-collect/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-collect/">
            crunchy-collect
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-prometheus/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-prometheus/">
            crunchy-prometheus
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-grafana/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-grafana/">
            crunchy-grafana
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgadmin4/">
            crunchy-pgadmin4
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-watch/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-watch/">
            crunchy-watch
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-vacuum/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-vacuum/">
            crunchy-vacuum
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-upgrade/">
            crunchy-upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-sim/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-sim/">
            crunchy-sim
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-dba/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-dba/">
            crunchy-dba
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgbouncer/">
            crunchy-pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgpool/">
            crunchy-pgpool
          </a>
        </div>
    </li>
      <li data-nav-id="/container-specifications/crunchy-pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgbadger/">
            crunchy-pgbadger
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/contributing/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/contributing/">Contributing</a>

      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/CrunchyData/crunchy-containers" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="https://kubernetes.io/docs/" target="_blank" rel="noopener"><i class='fa fa-bookmark'></i> <label>Kubernetes Documentation</label></a></li>
                <li class="" role=""><a href="https://github.com/CrunchyData/crunchy-containers/blob/master/LICENSE.md" target="_blank" rel="noopener"><i class='fa fa-file'></i> <label>License</label></a></li>
        </section>

    <hr />
    <li></li>

    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://crunchydata.github.io/crunchy-containers/contributing/" target="blank">
        <i class="fa fa-info-circle"></i>
        How to contribute
      </a>
      <a class="github-link" href="https://github.com/CrunchyData/crunchy-containers/edit/master/hugo/content/container-specifications/crunchy-backrest-restore.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='https://crunchydata.github.io/crunchy-containers/'>Crunchy Data Container Suite</a> > <a href='https://crunchydata.github.io/crunchy-containers/container-specifications/'>Container Specifications</a> > crunchy-backrest-restore






        </span>
    </div>

    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#packages">Packages</a></li>
<li><a href="#environment-variables">Environment Variables</a>
<ul>
<li><a href="#required">Required</a></li>
<li><a href="#optional">Optional</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>crunchy-backrest-restore</h1>
  



    
    
    
    

<p>The crunchy-backrest-restore container executes the pgBackRest utility, allowing FULL and DELTA restore capability. See the <a href="https://github.com/pgbackrest/pgbackrest">pgBackRest</a> guide for more details.</p>

<h2 id="features">Features</h2>

<p>The following features are supported and required by the crunchy-backrest-restore container:</p>

<ul>
<li>Mounted <code>pgbackrest.conf</code> configuration file via the <code>/pgconf</code> volume</li>
<li>Mounted <code>/backrestrepo</code> for access to pgBackRest archives</li>
</ul>

<h2 id="packages">Packages</h2>

<p>The crunchy-backrest-restore Docker image contains the following packages (versions vary depending on PostgreSQL version):</p>

<ul>
<li>PostgreSQL (9.5.13, 9.6.9 and 10.4)</li>
<li><a href="https://pgbackrest.org/">pgBackRest</a> (2.0)</li>
<li>CentOS7 - publicly available</li>
<li>RHEL7 - customers only</li>
</ul>

<h2 id="environment-variables">Environment Variables</h2>

<h3 id="required">Required</h3>

<table>
<thead>
<tr>
<th align="left"><strong>Name</strong></th>
<th align="left"><strong>Default</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>STANZA</strong></td>
<td align="left">None</td>
<td align="left">Must be set to the desired stanza for restore.</td>
</tr>

<tr>
<td align="left"><strong>DELTA</strong></td>
<td align="left">None</td>
<td align="left">When set, will add the <code>--delta</code> option to the restore. The delta option allows pgBackRest to automatically determine which files in the database cluster directory can be preserved and which ones need to be restored from the backup - it also removes files not present in the backup manifest so it will dispose of divergent changes.</td>
</tr>
</tbody>
</table>

<h3 id="optional">Optional</h3>

<table>
<thead>
<tr>
<th align="left"><strong>Name</strong></th>
<th align="left"><strong>Default</strong></th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="left"><strong>CRUNCHY_DEBUG</strong></td>
<td align="left">FALSE</td>
<td align="left">Set this to true to enable debugging in logs. Note: this mode can reveal secrets in logs.</td>
</tr>
</tbody>
</table>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-backup/" title="crunchy-backup"> <i class="fa fa-chevron-left"></i><label>crunchy-backup</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/crunchy-containers/container-specifications/crunchy-pgdump/" title="crunchy-pgdump" style="margin-right: 0px;"><label>crunchy-pgdump</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="https://crunchydata.github.io/crunchy-containers/js/clipboard.min.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/js/featherlight.min.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/js/html5shiv-printshiv.min.js"></script>

<script src="https://crunchydata.github.io/crunchy-containers/js/modernizr.custom.71422.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/js/docdock.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>
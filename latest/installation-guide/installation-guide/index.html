<!DOCTYPE html>
<html>
  <head>
    
    <title>Crunchy Data Container Suite Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.55.6" />
<title>Installation Guide :: Crunchy Data Container Suite Documentation</title>
<link rel="shortcut icon" href="https://crunchydata.github.io/crunchy-containers/latest/favicon.png" type="image/x-icon" />
<link href="https://crunchydata.github.io/crunchy-containers/latest/css/nucleus.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/latest/theme-flex/style.css" rel="stylesheet">

<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://crunchydata.github.io/crunchy-containers/latest/css/Fort-Fonts.css" rel="stylesheet">
<link href="https://crunchydata.github.io/crunchy-containers/latest/css/custom.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<script src="https://crunchydata.github.io/crunchy-containers/latest/js/jquery-2.x.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.bundle.min.js" integrity="sha384-zDnhMsjVZfS3hiP7oCBRmfjkQC4fzxVxFhBx8Hkz2aZX8gEvA/jsP3eXRCvzTofP" crossorigin="anonymous"></script>
<script src="https://crunchydata.github.io/crunchy-containers/latest/js/main.js"></script>
<script src="https://crunchydata.github.io/crunchy-containers/latest/js/toc.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/latest";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/installation-guide/installation-guide/">
    
      <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  
<a class="navbar-brand" href="https://www.crunchydata.com/"><img alt="Crunchy Data" src="https://crunchydata.github.io/crunchy-containers/latest/images/logo.svg"></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <ul class="navbar-nav mr-auto"></ul>
  <span class="navbar-text">
      <nav class="shortcuts">
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers" target="_blank" rel="noopener">
                    <i class='fab fa-github'></i> <label>Source</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://kubernetes.io/docs/" target="_blank" rel="noopener">
                    <i class='fas fa-bookmark'></i> <label>Kubernetes</label>
                  </a>
              </li>
              <li class="" role="">
                  <a href="https://github.com/CrunchyData/crunchy-containers/blob/master/LICENSE.md" target="_blank" rel="noopener">
                    <i class='fas fa-file-contract'></i> <label>License</label>
                  </a>
              </li>
      </nav>
  </span>
</nav>

<article>
  <aside>

    <ul class="menu">
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="">
        </div>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/latest/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/latest/js/auto-complete.js"></script>
        <link href="https://crunchydata.github.io/crunchy-containers/latest/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/crunchydata.github.io\/crunchy-containers\/latest";
          
        </script>
        <script type="text/javascript" src="https://crunchydata.github.io/crunchy-containers/latest/js/search.js"></script>
      </div>

      <hr>
      <a class="baselink" href="https://crunchydata.github.io/crunchy-containers/latest/">Crunchy Data Container Suite Documentation</a>
      <hr>
        <b>Available Formats</b>
        <nav class="downloads">
                <li class="" role="">
                    <a href="https://crunchydata.github.io/crunchy-containers/latest/pdf/crunchy_containers.pdf" target="_blank" rel="noopener">
                      <i class='fas fa-file-pdf'></i> <label>PDF</label>
                    </a>
                </li>
                <li class="" role="">
                    <a href="https://crunchydata.github.io/crunchy-containers/latest/epub/crunchy_containers.epub" target="_blank" rel="noopener">
                      <i class='fas fa-book'></i> <label>EPUB</label>
                    </a>
                </li>
        </nav>
        <hr>

      <b>Navigation</b>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/overview/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/overview/">Overview</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/overview/overview/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/overview/overview/">
            Container Images
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/overview/supported/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/overview/supported/">
            Supported Platforms
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/">Client User Guide</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/user-guide/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/user-guide/">
            User Guide
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/usage/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/client-user-guide/usage/">
            Using the Images
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/">Examples</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/primary/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/primary/">
            PostgreSQL Primary
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/custom-config/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/custom-config/">
            Custom Configuration of PostgreSQL Container
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/custom-config-ssl/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/custom-config-ssl/">
            Custom Configuration of PostgreSQL Container with SSL
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/primary-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/primary-replica/">
            Primary and Streaming Replica Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/sync-replica/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/sync-replica/">
            Synchronous Replication
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/postgis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/postgresql/postgis/">
            PostGIS Container
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/poolers/pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/poolers/pgpool/">
            pgPool II
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgbackrest/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgbackrest/">
            pgBackRest
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgbasebackup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgbasebackup/">
            pgBaseBackup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgdump-pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/backup-restoration/pgdump-pgrestore/">
            pgDump &amp; pgRestore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/poolers/pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/poolers/pgbouncer/">
            pgBouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/metrics/pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/metrics/pgbadger/">
            pgBadger
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/metrics/pgbench/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/metrics/pgbench/">
            pgBench
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/logging/centralized-logging/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/logging/centralized-logging/">
            Centralized Logging
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/logging/pgaudit/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/logging/pgaudit/">
            pgAudit
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/administration/upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/administration/upgrade/">
            Upgrade
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/examples/administration/pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/examples/administration/pgadmin4/">
            pgAdmin 4
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/" class="dd-item parent haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/">Installation Guide</a>
            <i class="fas fa-angle-down fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/installation-guide/" class="dd-item active">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/installation-guide/">
            Installation Guide
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/storage-configuration/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/storage-configuration/">
            Storage Configuration
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/">Container Specifications</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgadmin4/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgadmin4/">
            crunchy-pgadmin4
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbackrest/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbackrest/">
            crunchy-pgbackrest
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbackrest-repo/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbackrest-repo/">
            crunchy-pgbackrest-repo
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbadger/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbadger/">
            crunchy-pgbadger
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbouncer/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgbouncer/">
            crunchy-pgbouncer
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgpool/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-pgpool/">
            crunchy-pgpool
          </a>
        </div>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/">crunchy-postgres</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/postgres/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/postgres/">
            postgres
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/backup/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/backup/">
            backup
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgbasebackup-restore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgbasebackup-restore/">
            pgbasebackup-restore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgbench/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgbench/">
            pgbench
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgdump/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgdump/">
            pgdump
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgrestore/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/pgrestore/">
            pgrestore
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/sqlrunner/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres/sqlrunner/">
            sqlrunner
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres-appdev/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres-appdev/">
            crunchy-postgres-appdev
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres-gis/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-postgres-gis/">
            crunchy-postgres-gis
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-upgrade/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/container-specifications/crunchy-upgrade/">
            crunchy-upgrade
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/contributing/" class="dd-item haschildren
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/contributing/">Contributing</a><i class="fas fa-angle-right fa-lg category-icon"></i>

      </div>
        <ul>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/contributing/building/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/contributing/building/">
            Building the Containers
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/contributing/issues/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/contributing/issues/">
            Submitting Issues
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/contributing/pull-requests/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/contributing/pull-requests/">
            Submitting Pull Requests
          </a>
        </div>
    </li>
      <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/contributing/documentation-updates/" class="dd-item">
        <div>
          <a href="https://crunchydata.github.io/crunchy-containers/latest/contributing/documentation-updates/">
            
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="https://crunchydata.github.io/crunchy-containers/latest/troubleshooting/" class="dd-item
        ">
      <div>
      <a href="https://crunchydata.github.io/crunchy-containers/latest/troubleshooting/">Troubleshooting</a>

      </div>
    </li>




      <hr><nav id="TableOfContents"></nav>



      <section>
      </section>
    </ul>
  </aside>
  <section class="page">

    <div class="nav-select">
      <center>Navigation :
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/overview/" >
   Overview</option>
    <option value="/client-user-guide/" >
   Client User Guide</option>
    <option value="/examples/" >
   Examples</option>
    <option value="/installation-guide/" >
   Installation Guide</option> 
      <option value="/installation-guide/installation-guide/"  selected>- Installation Guide</option>
      <option value="/installation-guide/storage-configuration/" >- Storage Configuration</option>
  
    <option value="/container-specifications/" >
   Container Specifications</option>
    <option value="/contributing/" >
   Contributing</option>
    <option value="/troubleshooting/" >
   Troubleshooting</option>



        </select>
      </center>
    </div>

    
      <div id="top-bar">
        
          
          
          
        <div id="top-github-link">
          <a class="github-link" href="https://crunchydata.github.io/crunchy-containers/latest/contributing/" target="blank">
            <i class="fa fa-info-circle"></i>
            
          </a>
          <a class="github-link" href="https://github.com/CrunchyData/crunchy-containers/edit/master/docs/content/installation-guide/installation-guide.md" target="blank">
            <i class="fa fa-code-fork"></i>
            
          </a>
        </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            <span class="links">
            







 <a href='https://crunchydata.github.io/crunchy-containers/latest/'>Introduction</a> > <a href='https://crunchydata.github.io/crunchy-containers/latest/installation-guide/'>Installation Guide</a> > Installation Guide

 

 


            </span>
        </div>

      </div>
    

    
    <div id="body-inner">

    <h1>Installation Guide</h1>

    

    
    

<h1 id="overview">Overview</h1>

<p>This document serves four purposes:</p>

<ol>
<li>Ensure you have  the prerequisites for building the images in Crunchy Container Suite</li>
<li>Make sure your local machine has all the pieces needed to run the examples in the GitHub repository</li>
<li>Run the images as standalone containers in Docker</li>
<li>Instruct you how to install the Crunchy Container Suite into Kubernetes or OpenShift</li>
</ol>

<p>Where applicable, we will try to denote which installations and steps are required for the items above.</p>

<p>When we set up the directories below, you will notice they seem to be quite deeply nested. We are
setting up a <a href="https://golang.org/">Go programming language</a> workspace. Go has a specific folder structure
for it&rsquo;s <a href="https://golang.org/doc/code.html#Workspaces">workspaces</a> with multiple projects in a workspace.
If you are <strong>not</strong> going build the container images you can ignore the deep directories below, but it will
not hurt you if you follow the directions exactly.</p>

<h1 id="requirements">Requirements</h1>

<p>These instructions are developed and on for the following operating systems:</p>

<ul>
<li><p><strong>CentOS 7</strong></p></li>

<li><p><strong>RHEL 7</strong></p></li>
</ul>

<p>We also assume you are using the Docker provided with the distributions above. If you have installed
Docker CE or EE on your machine, please create a VM for this work or uninstall Docker CE or EE.</p>

<p>The images in Crunchy Container Suite can run on different environments including:</p>

<ul>
<li><p><strong>Docker 1.13+</strong></p></li>

<li><p><strong>OpenShift Container Platform 3.11</strong></p></li>

<li><p><strong>Kubernetes 1.8+</strong></p></li>
</ul>

<h1 id="initial-installs">Initial Installs</h1>

<div class="notices tip" >

Please note that _golang_ is only required if you are building the containers from source. If you do
not plan on building the containers then installing _git_ is sufficient.

</div>

<h2 id="centos-7-only">CentOS 7 only</h2>

<pre><code>$ sudo yum -y install epel-release
$ sudo yum -y install golang git
</code></pre>

<h2 id="rhel-7-only">RHEL 7 only</h2>

<pre><code>$ sudo subscription-manager repos --enable=&quot;rhel-7-server-extras-rpms&quot; --enable=&quot;rhel-7-server-optional-rpms&quot;
$ sudo yum -y install epel-release
$ sudo yum -y install golang git
</code></pre>

<h1 id="clone-github-repository">Clone GitHub repository</h1>

<p>Make directories to hold the GitHub clone that also work with the Go workspace structure</p>

<pre><code>$ mkdir -p $HOME/cdev/src/github.com/crunchydata $HOME/cdev/pkg $HOME/cdev/bin
$ cd $HOME/cdev/src/github.com/crunchydata
$ git clone https://github.com/crunchydata/crunchy-containers
$ cd crunchy-containers
$ git checkout v4.6.2
</code></pre>

<h1 id="your-shell-environment">Your Shell Environment</h1>

<p>We have found, that because of the way Go handles different projects, you may want to create a separate account
if are plan to build the containers and work on other Go projects. You could also look into some of the
GOPATH wrappers.</p>

<p>If your goal is to simply run the containers, any properly configured user account should
work.</p>

<p>Now we need to set the project paths and software version numbers. Edit your $HOME/.bashrc file with your
favorite editor and add the following information. You can leave out the comments at the end of each
line starting with #:</p>

<pre><code>export GOPATH=$HOME/cdev        # set path to your new Go workspace
export GOBIN=$GOPATH/bin        # set bin path
export PATH=$PATH:$GOBIN        # add Go bin path to your overall path
export CCP_BASEOS=centos8       # centos8 for CentOS, ubi8 for Red Hat Universal Base Image
export CCP_PGVERSION=12         # The PostgreSQL major version
export CCP_PG_FULLVERSION=13.2
export CCP_POSTGIS_VERSION=3.0  # The PostGIS version
export CCP_VERSION=4.6.2
export CCP_IMAGE_PREFIX=crunchydata # Prefix to put before all the container image names
export CCP_IMAGE_TAG=$CCP_BASEOS-$CCP_PG_FULLVERSION-$CCP_VERSION   # Used to tag the images
export CCP_POSTGIS_IMAGE_TAG=$CCP_BASEOS-$CCP_PG_FULLVERSION-$CCP_POSTGIS_VERSION-$CCP_VERSION # Used to tag images that include PostGIS
export CCPROOT=$GOPATH/src/github.com/crunchydata/crunchy-containers    # The base of the clone github repo
export CCP_SECURITY_CONTEXT=&quot;&quot;
export CCP_CLI=kubectl          # kubectl for K8s, oc for OpenShift
export CCP_NAMESPACE=demo       # Change this to whatever namespace/openshift project name you want to use
</code></pre>

<p>It will be necessary to refresh your <code>.bashrc</code> file in order for the changes to take
effect.</p>

<pre><code>. ~/.bashrc
</code></pre>

<p>At this point we have almost all the prequesites required to build the Crunchy Container Suite.</p>

<h1 id="building-ubi-containers-with-supported-crunchy-enterprise-software">Building UBI Containers With Supported Crunchy Enterprise Software</h1>

<p>Before you can build supported containers on UBI and Crunchy Supported Software, you need
to add the Crunchy repositories to your approved Yum repositories. Crunchy Enterprise Customer running on UBI
can login and download the Crunchy repository key and yum repository from <a href="https://access.crunchydata.com/">https://access.crunchydata.com/</a>
on the downloads page. Once the files are downloaded please place them into the <code>$CCPROOT/conf</code> directory (defined
above in the environment variable section).</p>

<h2 id="install-docker">Install Docker</h2>

<div class="notices info" >

The OpenShift and Kubernetes (KubeAdm) instructions both have a section for installing docker. Installing
docker now won't cause any issues but you may wish to configure Docker storage before bringing
everything up. Configuring Docker Storage is different from *Storage Configuration* referenced later in the
instructions and is not covered here.

For a basic docker installation, you can follow the instructions below. Please refer to
the respective installation guide for the version of Kubernetes you are installing for
more specific details.

</div>

<p>Install Docker</p>

<pre><code>sudo yum -y install docker
</code></pre>

<p>It is necessary to add the <code>docker</code> group and give your user access
to that group:</p>

<pre><code>sudo groupadd docker
sudo usermod -a -G docker &lt;username&gt;
</code></pre>

<p>Logout and login again as the same user to allow group settings to take effect.</p>

<p>Enable Docker service and start Docker (once all configuration is complete):</p>

<pre><code>sudo systemctl enable docker.service
sudo systemctl start docker.service
</code></pre>

<div class="notices info" >

At this point you should be able to build the containers. Please to go to [Building the Containers](/contributing/building/)
page and continue from there.

</div>

<h2 id="install-postgresql">Install PostgreSQL</h2>

<div class="notices tip" >

You only need to install PostgreSQL locally if you want to use the examples - it is not required for
either building the containers or installing the containers into Kubernetes.

</div>

<p>There are a variety of ways you can <a href="https://www.crunchydata.com/developers/download-postgres">download PostgreSQL</a>.</p>

<p>For specific installation instructions for <a href="https://www.crunchydata.com/developers/download-postgres/binaries/postgresql12">installing PostgreSQL 12 on CentOS</a>, please visit the <a href="https://www.crunchydata.com/developers">Crunchy Data Developer Portal</a>:</p>

<p><a href="https://www.crunchydata.com/developers/download-postgres/binaries/postgresql12">https://www.crunchydata.com/developers/download-postgres/binaries/postgresql12</a></p>

<h2 id="configuring-storage-for-kubernetes-based-systems">Configuring Storage for Kubernetes Based Systems</h2>

<p>In addition to the environment variables we set earlier, you will need to add environment variables
for Kubernetes storage configuration. Please see the <a href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/storage-configuration/">Storage Configuration</a>
document for configuring storage using environment variables set in <code>.bashrc</code>.</p>

<p>Don&rsquo;t forget to:</p>

<pre><code>source ~/.bashrc
</code></pre>

<h2 id="openshift-installation">OpenShift Installation</h2>

<p>Use the OpenShift installation guide to install OpenShift Enterprise on your host. Make sure
to choose the proper version of OpenShift you want to install. The main instructions for
3.11 are here and you&rsquo;ll be able to select a different version there, if needed:</p>

<p><a href="https://docs.openshift.com/container-platform/3.11/install/index.html">https://docs.openshift.com/container-platform/3.11/install/index.html</a></p>

<h2 id="kubernetes-installation">Kubernetes Installation</h2>

<div class="notices warning" >
Make sure your hostname resolves to a single IP address in your
/etc/hosts file. The NFS examples will not work otherwise and other problems
with installation can occur unless you have a resolving hostname.

You should see a single IP address returned from this command:

    $ hostname --ip-address

</div>

<h3 id="installing-kubernetes">Installing Kubernetes</h3>

<p>We suggest using Kubeadm as a simple way to install Kubernetes.</p>

<p>See <a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/">Kubeadm</a>
for installing the latest version of Kubeadm.</p>

<p>See <a href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/">Create a Cluster</a>
for creating the Kubernetes cluster using <strong>Kubeadm</strong>. Note: We find that Weave networking
works particularly well with the container suite.</p>

<p>Please see <a href="https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/">here</a>
to view the official documentation regarding configuring DNS for your Kubernetes cluster.</p>

<h3 id="post-kubernetes-configuration">Post Kubernetes Configuration</h3>

<p>In order to run the various examples, Role Based Account Control will need to be set up.
Specifically, the <strong>cluster-admin</strong> role will need to be assigned to the Kubernetes user
that will be utilized to run the examples. This is done by creating the proper
<strong>ClusterRoleBinding</strong>:</p>

<pre><code>$ kubectl create clusterrolebinding cluster-admin-binding \
--clusterrole cluster-admin --user someuser
</code></pre>

<p>If you are running on GKE, the following command can be utilized to auto-populate the <strong>user</strong>
option with the account that is currently logged into Google Cloud:</p>

<pre><code>$ kubectl create clusterrolebinding cluster-admin-binding \
--clusterrole cluster-admin --user $(gcloud config get-value account)
</code></pre>

<p>If more than one user will be running the examples on the same Kubernetes cluster, a unique name
will need to be provided for each new <strong>ClusterRoleBinding</strong> created in order to assign the
<strong>cluster-admin</strong> role to every user. The example below will create a <strong>ClusterRoleBinding</strong> with a
unique value:</p>

<pre><code>$ kubectl create clusterrolebinding &lt;unique&gt;-cluster-admin-binding \
    --clusterrole cluster-admin \
    --user someuser
</code></pre>

<p>If you are running on GKE, the following can be utilized to create a unique <strong>ClusterRoleBinding</strong>
for each user, with the user’s Google Cloud account prepended to the name of each new
<strong>ClusterRoleBinding</strong>:</p>

<pre><code>$ kubectl create clusterrolebinding &quot;$(gcloud config get-value account)-cluster-admin-binding&quot; \
    --clusterrole cluster-admin \
    --user $(gcloud config get-value account)
</code></pre>

<h2 id="helm">Helm</h2>

<p>Some Kubernetes Helm examples are provided in the following directory as one
option for deploying the Container Suite.</p>

<pre><code>$CCPROOT/examples/helm/
</code></pre>

<p>Once you have your Kubernetes environment configured, it is simple to get
Helm up and running. Please refer to <a href="https://github.com/kubernetes/helm/blob/master/docs/install.md">this document</a>
to get Helm installed and configured properly.</p>

<h1 id="configuring-namespace-and-permissions">Configuring Namespace and Permissions</h1>

<p>In Kubernetes, a concept called a <strong>namespace</strong> provides the means to separate
created resources or components into individual logically grouped partitions. In OpenShift,
<em>namespace</em> is referred to as a <em>project</em>.</p>

<p>It is considered a best practice to have dedicated namespaces for projects in
both testing and production environments.</p>

<div class="notices info" >
All examples in the Crunchy Container Suite operate within the namespace
defined by the environment variable `$CCP_NAMESPACE`. The default we use for namespace
is 'demo' but it can be set to any valid namespace name. The instructions below
illustrate how to set up and work within new namespaces or projects in both
Kubernetes and OpenShift.
</div>

<h2 id="kubernetes">Kubernetes</h2>

<p>This section will illustrate how to set up a new Kubernetes namespace called <strong>demo</strong>, and will
then show how to provide permissions to that namespace to allow the Kubernetes examples to run
within that namespace.</p>

<p>First, view currently existing namespaces:</p>

<pre><code>$ kubectl get namespace
NAME          STATUS    AGE
default       Active    21d
kube-public   Active    21d
kube-system   Active    21d
</code></pre>

<p>Then, create a new namespace called <strong>demo</strong>:</p>

<pre><code>$ kubectl create -f $CCPROOT/conf/demo-namespace.json
namespace &quot;demo&quot; created
$ kubectl get namespace demo
NAME      STATUS    AGE
demo      Active    7s
</code></pre>

<p>Then set the namespace as the default for the current context:</p>

<div class="notices tip" >

When a namespace is not explicitly stated for a command, Kubernetes uses the namespace
specified by the currently set context.

</div>

<pre><code>$ kubectl config set-context $(kubectl config current-context) --namespace=demo
</code></pre>

<p>We can verify that the namespace was set correctly through the following command:</p>

<pre><code>$ kubectl config view | grep namespace:
    namespace: demo
</code></pre>

<h2 id="openshift">OpenShift</h2>

<p>This section assumes an administrator has already logged in first as the <strong>system:admin</strong> user
as directed by the OpenShift Installation Guide.</p>

<p>For our development purposes only, we typically specify the OCP
Authorization policy of <code>AllowAll</code> as documented here:</p>

<p><a href="https://docs.openshift.com/container-platform/3.11/install_config/configuring_authentication.html#AllowAllPasswordIdentityProvider">https://docs.openshift.com/container-platform/3.11/install_config/configuring_authentication.html#AllowAllPasswordIdentityProvider</a></p>

<p>We do not recommend this authentication policy for a production
deployment of OCP.</p>

<div class="notices tip" >
For the best results, it is recommended that you run the examples with a user that has **NOT** been
assigned the **cluster-admin** cluster role.
</div>

<p>Log into the system as a user:</p>

<pre><code>$ oc login -u &lt;user&gt;
</code></pre>

<p>The next step is to create a <strong>demo</strong> namespace to run the examples within. The
name of this OCP project will be what you supply in the CCP_NAMESPACE
environment variable:</p>

<pre><code>$ oc new-project demo --description=&quot;Crunchy Containers project&quot; --display-name=&quot;Crunchy-Containers&quot;
Now using project &quot;demo&quot; on server &quot;https://127.0.0.1:8443&quot;.

$ export CCP_NAMESPACE=demo
</code></pre>

<p>If we view the list of projects, we can see the new project has been added and is &ldquo;active&rdquo;.</p>

<pre><code>$ oc get projects
NAME        DISPLAY NAME         STATUS
demo        Crunchy-Containers   Active
myproject   My Project           Active
</code></pre>

<p>If you were on a different project and wanted to switch to the demo project, you would do
so by running the following:</p>

<pre><code>$ oc project demo
Now using project &quot;demo&quot; on server &quot;https://127.0.0.1:8443&quot;.
</code></pre>

<p>When self-provisioning a new project using the <code>oc new-project</code> command, the current user (i.e.,
the user you used when logging into OCP with the <code>oc login</code> command) will automatically be assigned
to the <strong>admin</strong> role for that project. This will allow the user to create the majority of the
objects needed to successfully run the examples. However, in order to create the <strong>Persistent
Volume</strong> objects needed to properly configure storage for the examples, an additional role is
needed. Specifically, a new role is needed that can both create and delete <strong>Persistent Volumes</strong>.</p>

<p>Using the following two commands, create a new Cluster Role that has the ability to create and delete
persistent volumes, and then assign that role to your current user:</p>

<div class="notices warning" >
Please be aware that the following two commands require privileges that your current user may not
have. In the event that you are unable to run these commands, and do not have access to a user
that is able to run them (e.g., the **system:admin** user that is created by default when
installing OCP), please contact your local OCP administrator to run the commands on your behalf, or
grant you the access required to run them yourself.
</div>

<pre><code>$ oc create clusterrole crunchytester --verb=&quot;list,create,delete&quot; --resource=persistentvolumes
clusterrole &quot;crunchytester&quot; created

$ oc adm policy add-cluster-role-to-user crunchytester someuser
cluster role &quot;crunchytester&quot; added: &quot;someuser&quot;
</code></pre>

<p>Your user should now have the roles and privileges required to run the examples.</p>



    
      <div class="chevrons">
  <div id="navigation">
<a class="nav nav-prev" href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/" title="Installation Guide"> <i class="fa fa-chevron-left"></i><label>Installation Guide</label></a>
    <a class="nav nav-next" href="https://crunchydata.github.io/crunchy-containers/latest/installation-guide/storage-configuration/" title="Storage Configuration" style="margin-right: 0px;"><label>Storage Configuration</label><i class="fa fa-chevron-right"></i></a></div>
</div>

</section>
</article>

<footer>

<div class="footline">
  

  



</div>


<div>
</div>

<div class="text-center">
  <p><small>&copy; 2017 - 2021 Crunchy Data Solutions, Inc.</small></p>
</div>


</footer>

<link href="https://crunchydata.github.io/crunchy-containers/latest/css/featherlight.min.css" rel="stylesheet">
<script src="https://crunchydata.github.io/crunchy-containers/latest/js/featherlight.min.js"></script>

<script src="https://crunchydata.github.io/crunchy-containers/latest/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>
